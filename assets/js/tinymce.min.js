'use strict';var TI_Picker={};
(function(a){TI_Picker={target:"",showLightbox:function(c){var d=TI_Picker;d.loadIconsList(function(){var c=a(document).scrollTop()+80,g=a("#TI_Picker"),e=a("#TI_Picker_overlay");a("body").on("click","#TI_Picker .themify-icons-lightbox_container a:not(.external-link)",function(b){b.preventDefault();b.stopPropagation();d.setIcon(a(this).data("icon"))}).on("click","#TI_Picker_overlay, #TI_Picker .themify-icons-close_lightbox",function(b){b.preventDefault();b.stopPropagation();d.closeLightbox()});e.show();
g.css("top",a(document).height()).show().animate({top:c},600)})},loadIconsList:function(c){a("#TI_Picker").length?c():a.ajax({url:themifyIconsPlugin.ajaxurl,type:"POST",data:{action:"ti_get_icons"},success:function(d){a("body").append(d);c()}})},setIcon:function(a){TI_Picker.target.val(a).trigger("change");TI_Picker.closeLightbox()},closeLightbox:function(){a("#TI_Picker").animate({top:a(document).height()},400,function(){a("#TI_Picker_overlay").hide();a(this).hide()})}}})(jQuery);
(function(a){tinymce.PluginManager.add("themifyicons",function(c,d){function f(){var a=c.settings.color_picker_callback;if(a)return function(){var e=this;a.call(c,function(a){e.value(a).fire("change")},e.value())}}a("head").append('<link rel="stylesheet" type="text/css" href="'+themifyIconsPlugin.css+'">');c.addButton("themifyicons",{title:"Themify Icon",image:d+"/images/favicon.png",onclick:function(){var a=[];jQuery.each(themifyIconsPlugin.fields,function(c,b){"colorbox"==b.type?b.onaction=f():
"iconpicker"==b.type&&(b={type:"container",label:b.label,layout:"flex",direction:"row",items:[{type:"textbox",name:b.name},{type:"button",text:b.text,onclick:function(){TI_Picker.target=jQuery(this.$el).prev();TI_Picker.showLightbox(null)}}]});a.push(b)});c.windowManager.open({title:themifyIconsPlugin.menuName,body:a,onSubmit:function(a){a=this.toJSON();a.selectedContent=c.selection.getContent();var b=wp.template("themify-icons-plugin");c.insertContent(b(a))}})}})})})(jQuery);
